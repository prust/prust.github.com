
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<title>git URLs in NPM compare package.json versions</title>
<style>
html {
  font-family: Palatino;
  padding: 0;
  margin: 0;
}
body {
  padding: 0;
  margin: 0 auto;
  max-width: 40em;
}
pre {
  margin-left: 1em;
  padding: 0.5em 1em;
  border-left: 1px solid #ccc;
  background-color: #eee;
}
pre > code { color: #666 !important }
code {
  color: red;
  background-color: #eee;
  padding: 1px 5px;
}
h1 {
  margin-bottom: 2px;
}
h1 a {
  color: #666;
  text-decoration: none;
}
h1 a:hover {
  text-decoration: underline;
}
hr {
  height: 1px;
  color: #ccc;
  border-width: 0;
  background-color: #ccc;
}
#header {
  text-align: right;
  background-color: #eee;
  color: #999;
  padding: 5px 1em;
  border-bottom: 1px solid #ccc;
}
#header a {
  color: #999;
  text-decoration: none;
}
#header a:hover {
  text-decoration: underline;
}
div.date {
  font-style: italic;
  color: #999;
}
a.more {
  margin-bottom: 1em;
  background-color: #eee;
  display: inline-block;
  padding: 0.3em 0.5em;
  color: #666;
  float: right;
  text-decoration: none;
}
a.more:hover {
  text-decoration: underline;
}
blockquote {
  font-style: italic;
  background-color: #eee;
  margin-left: 1em;
  padding: 3px 1em;
  border-left: 1px solid #ccc;
  color: #666;
}
blockquote p {
  margin: 5px 0;
}
</style>
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
</head>
<body>
  <div id="header"><a href="/">Peter Rust's Dev Blog</a></div><article>
    <h1><a href=posts/2013-01-08-git-urls-in-npm-compare-package.json-versions.html>git URLs in NPM compare package.json versions</a></h1>
    <div class="date">Feb. 8, 2013</div>
    <p>The npm <a href="https://npmjs.org/doc/json.html">package.json docs</a> make it sound like you can use git URLs for dependent repos and reference them via a tag, branch-name or commit SHA. While this is technically true, the docs don’t mention that “npm install” will compare the local version of the repository and the remote one (at that tag/branch/commit) and if they are identical, it will assume that nothing needs to be done -- even if the tag/branch/commit URL previously used to pull that repo is different from the current tag/branch/commit.</p>
<p>For instance, if your main repo depends on “my-sub-repo#master” and you change it to “my-sub-repo#new-feature” and don’t change the version in package.json on the new-feature branch, “npm install” will do nothing. You have to change the version on that branch to something like “1.1.0-new-feature.1″ and then “npm install” will realize that it different from what was previously downloaded (“master”) and will update it.</p>

    
  </article></body></html>